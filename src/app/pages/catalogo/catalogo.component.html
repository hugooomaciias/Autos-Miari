<!-- Header -->
<app-header></app-header>

<!-- Sección 'Hero' -->
<app-hero-cat [filters]="filters" (filtersChange)="updateFilters($event)"></app-hero-cat>

<!-- Filtros y resultados de la búsqueda -->
<section>
    <div class="container mx-auto px-4 mt-96 pt-20 md:pt-12">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Filtros -->
            <app-filters [filters]="filters" [currentPage]="currentPage" (filtersChange)="updateFilters($event)" (goToPage)="goToPage($event)"></app-filters>
        
            <!-- Resultados -->
            <div class="flex-1">

                <!-- Resultados en el encambezado -->
                <app-result-header [filteredVehicles]="filteredVehicles" [viewType]="viewType" (viewTypeChange)="setViewType($event)"></app-result-header>
        
                <!-- Vehiculos -->
                <app-vehicles-c [vehicles]="pagedVehicles" [viewType]="viewType" [favorites]="favorites" [filters]="filters" [currentPage]="currentPage" [visible]="showModal" [vehicle]="selectedVehicle"   
                                (toggleFavorite)="onToggleFavorite($event)" (filtersChange)="updateFilters($event)" (goToPage)="goToPage($event)" (open)="openModal($event)" (close)="closeModal()">
                </app-vehicles-c>
        
                <!-- Paginación -->
                <app-pagination [vehicles]="filteredVehicles" [currentPage]="currentPage" [itemsPerPage]="itemsPerPage" [pageVehicles]="pagedVehicles"
                                [totalPages]="totalPages" (goToPage)="goToPage($event)">
                </app-pagination>
            </div>
        </div>
    </div>
</section>

<div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-md w-full">
        <span class="text-2xl font-bold">{{ selectedVehicle.name }}</span>
        <button class="absolute top-2 right-2 text-gray-600" (click)="closeModal()">✖</button>
        
        <!-- Carrusel de imágenes -->
        <div class="relative">
            <div class="overflow-hidden rounded-lg">
              <div class="whitespace-nowrap transition-transform duration-500 ease-in-out"
                   [style.transform]="'translateX(-' + currentIndex * 100 + '%)'">
                <div *ngFor="let image of selectedVehicle.vehicleImages let i = index" class="inline-block w-full">
                  <div class="aspect-w-16 aspect-h-9">
                    <img
                      [src]="image"
                      [alt]="selectedVehicle.name + ' - View ' + (i + 1)"
                      class="w-full h-full object-cover rounded-lg"
                    />
                  </div>
                </div>
              </div>
            </div>
          
            <!-- Botones -->
            <button (click)="prev()" class="absolute top-1/2 left-2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow">
                <app-left-arrow-icon></app-left-arrow-icon>
            </button>
            <button (click)="next()" class="absolute top-1/2 right-2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow">
                <app-rigth-arrow-icon></app-rigth-arrow-icon>
            </button>
        </div>
          

        <!-- Detalles del vehículo -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-4">
                <h3 class="font-semibold text-lg">información básica</h3>
                <div class="grid gap-3">
                    <div class="flex items-center gap-2">
                        <!-- <Car className="h-5 w-5 text-muted-foreground" /> -->
                        <span class="text-sm">Tipo: {{selectedVehicle.type}}</span>
                    </div>

                    <div class="flex items-center gap-2">
                        <!-- <Calendar className="h-5 w-5 text-muted-foreground" /> -->
                        <span class="text-sm">Año: {{selectedVehicle.year}}</span>
                    </div>

                    <div class="flex items-center gap-2">
                        <!-- <DollarSign className="h-5 w-5 text-muted-foreground" /> -->
                        <span class="text-sm">Precio: {{selectedVehicle.price}} €</span>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <h3 class="font-semibold text-lg">Detalles técnicos</h3>
                <div class="grid gap-3">
                    <div class="flex items-center gap-2">
                        <!-- <Gauge class="h-5 w-5 text-muted-foreground" /> -->
                        <span class="text-sm">Kilometraje: {{selectedVehicle.mileage}} km</span>
                    </div>

                    <div class="flex items-center gap-2">
                        <!-- <Settings class="h-5 w-5 text-muted-foreground" /> -->
                        <span class="text-sm">Transmisión: {{selectedVehicle.transmission}}</span>
                    </div>

                    <div class="flex items-center gap-2">
                        <!-- <Fuel class="h-5 w-5 text-muted-foreground" /> -->
                        <span class="text-sm">Tipo de combustible: {{selectedVehicle.fuel}}</span>
                    </div>

                    <div class="flex items-center gap-2">
                        <!-- <Paintbrush class="h-5 w-5 text-muted-foreground" /> -->
                        <span class="text-sm">Color: {{selectedVehicle.color}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

        <!-- <div className="grid gap-6">
            <div className="relative">
                <Carousel className="w-full">
                    <CarouselContent>
                    {vehicleImages.map((image, index) => (
                        <CarouselItem key={index}>
                            <AspectRatio ratio={16 / 9}>
                                <img
                                src={image}
                                alt={`${vehicle.name} - View ${index + 1}`}
                                className="w-full h-full object-cover rounded-lg"
                                />
                            </AspectRatio>
                        </CarouselItem>
                    ))}
                    </CarouselContent>

                    <CarouselPrevious className="left-2" />
                    <CarouselNext className="right-2" />
                </Carousel>
            </div>

            <div className="flex flex-wrap gap-2">
                {vehicle.isNew && (
                    <Badge className="bg-blue-500">New</Badge>
                )}
                {vehicle.isFeatured && (
                    <Badge variant="outline" className="border-purple-500 text-purple-500">
                    Featured
                    </Badge>
                )}
                {!vehicle.isAvailable && (
                    <Badge variant="destructive">Sold</Badge>
                )}
            </div>

            {/* Vehicle Details */}
            
        </div> -->